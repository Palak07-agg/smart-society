{"ast":null,"code":"// src/pages/Dashboard.js\nimport React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import'./Dashboard.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const navigate=useNavigate();// const [dashboardData, setDashboardData] = useState(null);\nconst[flatStats,setFlatStats]=useState({total:0,owned:0,rented:0,empty:0});const[userFlat,setUserFlat]=useState('');const user=JSON.parse(localStorage.getItem('user'));const features=[{title:'Payments',icon:'ðŸ’³',route:'/payments'},{title:'Complaints',icon:'ðŸ“',route:'/complaints'},{title:'Emergency Alerts',icon:'ðŸš¨',route:'/emergency-alerts'},{title:'Visitor Tracking',icon:'ðŸ•µï¸â€â™‚ï¸',route:'/visitor-tracking'},{title:'Polling',icon:'ðŸ—³ï¸',route:'/polling'},{title:'Parking',icon:'ðŸš—',route:'/parking'},{title:'Courier Alerts',icon:'ðŸ“¦',route:'/courier-alerts'},{title:'Language Support',icon:'ðŸŒ',route:'/language-support'}];useEffect(()=>{const fetchData=async()=>{try{const token=localStorage.getItem('token');const res=await axios.get('http://localhost:5000/api/dashboard',{headers:{Authorization:`Bearer ${token}`// âœ… This is crucial\n}});setFlatStats(res.data.flatStats);setUserFlat(res.data.flatNumber);}catch(err){console.error('Error fetching dashboard:',err);}};fetchData();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"dashboard-heading\",children:\"Welcome to Your Dashboard\"}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Hello, \",(user===null||user===void 0?void 0:user.username)||'User']}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Your Flat Number: \",(user===null||user===void 0?void 0:user.houseNumber)||'Flat']}),/*#__PURE__*/_jsxs(\"div\",{className:\"flats-box\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Available Flats Overview\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total Flats: \",flatStats.total]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Owned: \",flatStats.owned]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Rented: \",flatStats.rented]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Empty: \",flatStats.empty]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-grid\",children:features.map((feature,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-card\",onClick:()=>navigate(feature.route),children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-icon\",children:feature.icon}),/*#__PURE__*/_jsx(\"div\",{className:\"card-title\",children:feature.title})]},index))})]});};export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Dashboard","navigate","flatStats","setFlatStats","total","owned","rented","empty","userFlat","setUserFlat","user","JSON","parse","localStorage","getItem","features","title","icon","route","fetchData","token","res","get","headers","Authorization","data","flatNumber","err","console","error","className","children","username","houseNumber","map","feature","index","onClick"],"sources":["C:/Users/Dell/Desktop/smart-society/frontend/src/pages/Dashboard.js"],"sourcesContent":["// src/pages/Dashboard.js\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './Dashboard.css';\r\n\r\nconst Dashboard = () => {\r\n  const navigate = useNavigate();\r\n\r\n // const [dashboardData, setDashboardData] = useState(null);\r\n  const [flatStats, setFlatStats] = useState({\r\n    total: 0,\r\n    owned: 0,\r\n    rented: 0,\r\n    empty: 0\r\n  });\r\nconst [userFlat, setUserFlat]=useState('');\r\n  const user = JSON.parse(localStorage.getItem('user'));\r\n  const features = [\r\n    { title: 'Payments', icon: 'ðŸ’³', route: '/payments' },\r\n    { title: 'Complaints', icon: 'ðŸ“', route: '/complaints' },\r\n    { title: 'Emergency Alerts', icon: 'ðŸš¨', route: '/emergency-alerts' },\r\n    { title: 'Visitor Tracking', icon: 'ðŸ•µï¸â€â™‚ï¸', route: '/visitor-tracking' },\r\n    { title: 'Polling', icon: 'ðŸ—³ï¸', route: '/polling' },\r\n    { title: 'Parking', icon: 'ðŸš—', route: '/parking' },\r\n    { title: 'Courier Alerts', icon: 'ðŸ“¦', route: '/courier-alerts' },\r\n    { title: 'Language Support', icon: 'ðŸŒ', route: '/language-support' }\r\n  ];\r\n\r\n  useEffect(() => {\r\n  const fetchData = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const res = await axios.get('http://localhost:5000/api/dashboard', {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`, // âœ… This is crucial\r\n        },\r\n      });\r\n\r\n        setFlatStats(res.data.flatStats);\r\n        setUserFlat(res.data.flatNumber);\r\n    } catch (err) {\r\n      console.error('Error fetching dashboard:', err);\r\n    }\r\n  };\r\n\r\n  fetchData();\r\n}, []);\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"dashboard-container\">\r\n      <h1 className=\"dashboard-heading\">Welcome to Your Dashboard</h1>\r\n\r\n      <h3>Hello, {user?.username||'User'}</h3>\r\n      <p>Your Flat Number: {user?.houseNumber||'Flat'}</p>\r\n\r\n      <div className=\"flats-box\">\r\n        <h4>Available Flats Overview</h4>\r\n        <p>Total Flats: {flatStats.total}</p>\r\n        <p>Owned: {flatStats.owned}</p>\r\n        <p>Rented: {flatStats.rented}</p>\r\n        <p>Empty: {flatStats.empty}</p>\r\n      </div>\r\n\r\n      <div className=\"dashboard-grid\">\r\n        {features.map((feature, index) => (\r\n          <div\r\n            key={index}\r\n            className=\"dashboard-card\"\r\n            onClick={() => navigate(feature.route)}\r\n          >\r\n            <div className=\"card-icon\">{feature.icon}</div>\r\n            <div className=\"card-title\">{feature.title}</div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n};\r\n\r\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}